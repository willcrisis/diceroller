(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{315:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(529),c=n(11),s=n(97),i=n(272),u=n(37),l=n(10),f=n.n(l),p=n(160),d=function(e){var t=f()({},e);return a.a.createElement(p.a,t)},m=function(e){var t=f()({},e);return a.a.createElement(d,f()({},t,{mode:"contained"}))},b=n(25),v=n.n(b),h=n(3),g=n(2),y=n(69),E=n(4),w=n(144),O=n(44),j=n(262),x=n(32),P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};w.a.configureNext(w.a.create(200,w.a.Types.linear,w.a.Properties.scaleXY)),E.a.timing(e,{toValue:t,duration:200,useNativeDriver:!0}).start(n)},S=g.a.create({container:{display:"flex",alignItems:"center",justifyContent:"center",margin:10,borderColor:"#ddd",borderWidth:1,width:100,height:100},content:{alignItems:"center"}}),k=function(e){var t=e.type,n=e.value,o=e.onPress,c=Object(r.useState)(new E.a.Value(0)),s=v()(c,1)[0];Object(r.useEffect)((function(){return P(s,1),function(){P(s,0)}}),[]);var i=O.a.supported?O.a:y.a;return a.a.createElement(E.a.View,{style:[{transform:[{scale:s}]}]},a.a.createElement(i,{style:S.container,onPress:function(){o&&P(s,0,o)}},a.a.createElement(h.a,{style:S.content},a.a.createElement(j.a,null,n),a.a.createElement(x.a,null,t))))},C=g.a.create({button:{flex:1,marginHorizontal:5}}),D=function(e){var t=e.faces,n=e.onPress,r="d"+t;return a.a.createElement(m,{style:C.button,dark:!0,compact:!0,onPress:function(){return n({type:r,value:(e=t,Math.floor(Math.random()*e)+1)});var e},uppercase:!1},r)},I=n(12),A=n.n(I),T=n(154),N=function(e){var t=f()({},e);return a.a.createElement(d,f()({},t,{mode:"outlined"}))},B=g.a.create({container:{flex:1,backgroundColor:"#fff",width:"100%"},centeredHorizontal:{alignItems:"center"},centeredVertical:{justifyContent:"center"}}),U=function(e){var t=e.children,n=e.centeredHorizontal,r=e.centeredVertical,o=e.centered,c=[B.container];return o?c.push(B.centeredHorizontal,B.centeredVertical):(n&&c.push(B.centeredHorizontal),r&&c.push(B.centeredVertical)),a.a.createElement(h.a,{style:c},t)},W=g.a.create({spacer:{height:30}}),L=function(){return a.a.createElement(h.a,{style:W.spacer})};n(29);var R=n(527),V={tintColor:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc",tabBar:"#fefefe",errorBackground:"red",errorText:"#fff",warningBackground:"#EAEB5E",warningText:"#666804",noticeBackground:"#2f95dc",noticeText:"#fff"};function z(e){return a.a.createElement(R.a,{name:e.name,size:26,style:{marginBottom:-3},color:e.focused?V.tabIconSelected:V.tabIconDefault})}var M=n(58),H=n.n(M),J={apiKey:"AIzaSyBHCc4hJNPQUGBu3mup6WJCVCylUwmUyys",authDomain:"dice-roller-d68fa.firebaseapp.com",databaseURL:"https://dice-roller-d68fa.firebaseio.com",projectId:"dice-roller-d68fa",storageBucket:"",messagingSenderId:"277235469300",appId:"1:277235469300:web:b3717529c807f6b9"},F=function(){H.a.initializeApp(J)},G=n(265),Y=Object(r.createContext)({}),K=function(e,t){return function(n){e(n),t(!0)}},Q=function(e,t){return function(){t(!1),e(null)}},X=function(){return Object(r.useContext)(Y).showAlert},q=function(e){var t=e.children,n=Object(r.useState)(null),o=v()(n,2),c=o[0],s=o[1],i=Object(r.useState)(!1),u=v()(i,2),l=u[0],f=u[1];return a.a.createElement(Y.Provider,{value:{showAlert:K(s,f)}},t,a.a.createElement(G.a,{visible:l,action:c&&c.action,onDismiss:Q(s,f)},c&&c.text))},Z=n(13),$=n.n(Z),_=n(21),ee=n.n(_),te=n(17),ne=n.n(te),re=(n(264),n(263),n(83));function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){ne()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=function(e){return oe({},e.data(),{key:e.id})},se=function(e,t){return e>t?1:e<t?-1:0},ie=function(e,t,n,r,a,o){var c,s,i,u;return $.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(c=[],s=t&&t.key){l.next=6;break}return l.next=5,$.a.awrap(re.a.getItem("currentSession"));case 5:s=l.sent;case 6:return i=H.a.firestore(),(u=e&&e.uid)&&c.push(i.doc("users/"+u).onSnapshot((function(e){var t,n,a;return $.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.exists){o.next=2;break}return o.abrupt("return");case 2:if(t=ce(e),!((n=t.sessions)&&n.length>0)){o.next=10;break}return a=[],o.next=8,$.a.awrap(Promise.all(n.map((function(e){var t;return $.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$.a.awrap(i.doc("sessions/"+e).get());case 2:if(!(t=r.sent).exists){r.next=7;break}return r.abrupt("return",ce(t));case 7:i.doc("users/"+u).set({sessions:n.filter((function(t){return t!==e}))},{merge:!0});case 8:return r.abrupt("return",null);case 9:case"end":return r.stop()}}))}))));case 8:a=o.sent,r(a.filter((function(e){return e})).sort((function(e,t){return se(e.name,t.name)})));case 10:case"end":return o.stop()}}))}))),s&&c.push(i.doc("sessions/"+s).onSnapshot((function(e){var r,s;return $.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.exists){l.next=5;break}return a(null),n([]),o([]),l.abrupt("return",re.a.removeItem("currentSession"));case 5:r=ce(e),t||a(r),c.push(e.ref.collection("users/"+u+"/dice").orderBy("timestamp","asc").onSnapshot((function(e){var t=[];e.forEach((function(e){t=[].concat(ee()(t),[ce(e)])})),n(t)}))),s={},c.push(e.ref.collection("users").onSnapshot((function(e){e.forEach((function(e){return $.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e.id!==r.owner&&c.push(i.doc("users/"+e.id).onSnapshot((function(t){var n=ce(t);c.push(e.ref.collection("dice").onSnapshot((function(t){var r=[];t.forEach((function(e){r=[].concat(ee()(r),[ce(e)])})),s=oe({},s,ne()({},e.id,{user:n,dice:r})),o(Object.values(s).sort((function(e,t){return se(e.user.name,t.user.name)})))})))})));case 1:case"end":return t.stop()}}))}))})));case 10:case"end":return l.stop()}}))}))),l.abrupt("return",c);case 11:case"end":return l.stop()}}))},ue=function(e,t){var n,r;return $.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$.a.awrap(re.a.getItem("currentSession"));case 2:if(n=a.sent,t&&n){a.next=5;break}return a.abrupt("return");case 5:return r=H.a.firestore(),a.abrupt("return",r.collection("sessions/"+n+"/users/"+t.uid+"/dice").add(oe({},e,{timestamp:new Date})));case 7:case"end":return a.stop()}}))},le=function(e,t){var n,r,a;return $.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.key,o.next=3,$.a.awrap(re.a.getItem("currentSession"));case 3:if(r=o.sent,t&&r){o.next=6;break}return o.abrupt("return");case 6:return a=H.a.firestore(),o.abrupt("return",a.doc("sessions/"+r+"/users/"+t.uid+"/dice/"+n).delete());case 8:case"end":return o.stop()}}))},fe=function(e){var t,n;return $.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$.a.awrap(re.a.getItem("currentSession"));case 2:if(t=r.sent,e&&t){r.next=5;break}return r.abrupt("return");case 5:return n=H.a.firestore(),r.next=8,$.a.awrap(n.collection("sessions/"+t+"/users/"+e.uid+"/dice").get());case 8:r.sent.forEach((function(r){var a;return $.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=r.id,o.next=3,$.a.awrap(n.doc("sessions/"+t+"/users/"+e.uid+"/dice/"+a).delete());case 3:case"end":return o.stop()}}))}));case 10:case"end":return r.stop()}}))},pe=function(e,t,n){var r,a;return $.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n){o.next=2;break}return o.abrupt("return");case 2:return r=H.a.firestore(),o.next=5,$.a.awrap(r.collection("sessions").add(oe({},e,{owner:n.uid})));case 5:return a=o.sent,o.next=8,$.a.awrap(r.doc("sessions/"+a.id+"/users/"+n.uid).set({timestamp:new Date}));case 8:return o.abrupt("return",r.doc("users/"+n.uid).set({sessions:[].concat(ee()(t.map((function(e){return e.key}))),[a.id])},{merge:!0}));case 9:case"end":return o.stop()}}))},de=function(e,t,n){var r,a,o;return $.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(r=e.key,n){c.next=3;break}return c.abrupt("return");case 3:return a=H.a.firestore(),c.next=6,$.a.awrap(a.doc("sessions/"+r).get());case 6:if(o=c.sent,ce(o).owner!==n.uid){c.next=12;break}return c.next=11,$.a.awrap(a.doc("sessions/"+r).delete());case 11:return c.abrupt("return",a.doc("users/"+n.uid).set({sessions:t.filter((function(e){return e.key!==r})).map((function(e){return e.key}))},{merge:!0}));case 12:throw new Error("You are not the session owner.");case 13:case"end":return c.stop()}}))},me=function(e,t){return function(e,t){return H.a.auth().onAuthStateChanged((function(n){e(n),t(!1)}))}(e,t)},be=function(e,t){return function(e,t){return H.a.auth().signInWithEmailAndPassword(e,t)}(e,t)},ve=function(){return $.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.awrap(re.a.removeItem("currentSession"));case 2:return e.abrupt("return",H.a.auth().signOut());case 3:case"end":return e.stop()}}))},he=function(e,t,n){return function(e,t,n){var r,a;return $.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,$.a.awrap(H.a.auth().createUserWithEmailAndPassword(t,n));case 2:return r=o.sent,a=r.user,o.next=6,$.a.awrap(a.updateProfile({displayName:e}));case 6:return o.next=8,$.a.awrap(H.a.firestore().doc("users/"+a.uid).set({name:e}));case 8:case"end":return o.stop()}}))}(e,t,n)},ge=Object(r.createContext)({}),ye=function(e){return function(t,n){return $.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,$.a.awrap(be(t,n));case 3:return r.abrupt("return",r.sent);case 6:r.prev=6,r.t0=r.catch(0),e({text:r.t0.message});case 9:case"end":return r.stop()}}),null,null,[[0,6]])}},Ee=function(e){return function(t,n,r){return $.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,$.a.awrap(he(t,n,r));case 3:return a.abrupt("return",a.sent);case 6:a.prev=6,a.t0=a.catch(0),e({text:a.t0.message});case 9:case"end":return a.stop()}}),null,null,[[0,6]])}},we=function(){return Object(r.useContext)(ge)},Oe=function(e){var t=e.children,n=Object(r.useState)(null),o=v()(n,2),c=o[0],s=o[1],i=Object(r.useState)(!0),u=v()(i,2),l=u[0],f=u[1],p=X();return Object(r.useEffect)((function(){me(s,f)}),[]),a.a.createElement(ge.Provider,{value:{isAuthLoading:l,currentUser:c,loginWithEmailAndPassword:ye(p),logOut:ve,registerWithEmailAndPassword:Ee(p)}},t)},je="Die",xe="Session",Pe=function(e,t){switch(e){case xe:return function(e){var t;return $.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$.a.awrap(H.a.firestore().doc("sessions/"+e).get());case 2:if(!(t=n.sent).exists){n.next=7;break}return n.abrupt("return",ce(t));case 7:return n.abrupt("return",null);case 8:case"end":return n.stop()}}))}(t);default:throw new Error("Unknown entity")}},Se=function(e,t,n){return function(e,t,n){var r;return $.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(n){a.next=2;break}return a.abrupt("return");case 2:return r=H.a.firestore(),a.next=5,$.a.awrap(r.doc("sessions/"+e+"/users/"+n.uid).set({timestamp:new Date}));case 5:return a.abrupt("return",r.doc("users/"+n.uid).set({sessions:[].concat(ee()(t.map((function(e){return e.key}))),[e])},{merge:!0}));case 6:case"end":return a.stop()}}))}(e,t,n)};function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(n,!0).forEach((function(t){ne()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=Object(r.createContext)({}),Ie=function(e,t,n,r){var a;return a={},ne()(a,"add"+t,(function(r){return function(e,t,n,r){return $.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e,a.next=a.t0===je?3:a.t0===xe?4:5;break;case 3:return a.abrupt("return",ue(t,r));case 4:return a.abrupt("return",pe(t,n,r));case 5:throw new Error("Unknown entity");case 6:case"end":return a.stop()}}))}(t,r,e,n)})),ne()(a,"remove"+t,(function(a){return function(e,t,n,r,a){return $.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:o.t0=e,o.next=o.t0===je?3:o.t0===xe?4:14;break;case 3:return o.abrupt("return",le(t,r));case 4:return o.prev=4,o.next=7,$.a.awrap(de(t,n,r));case 7:return o.abrupt("return",o.sent);case 10:o.prev=10,o.t1=o.catch(4),a({text:o.t1.message});case 13:return o.abrupt("break",15);case 14:throw new Error("Unknown entity");case 15:case"end":return o.stop()}}),null,null,[[4,10]])}(t,a,e,n,r)})),ne()(a,"clear"+t,(function(){return function(e,t){return $.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=e,n.next=n.t0===je?3:n.t0===xe?4:5;break;case 3:return n.abrupt("return",fe(t));case 4:return n.abrupt("break",6);case 5:throw new Error("Unknown entity");case 6:case"end":return n.stop()}}))}(t,n)})),a},Ae=function(e){return function(t){return e(t),re.a.setItem("currentSession",t.key)}},Te=function(e){return Pe(xe,e)},Ne=function(e,t){return function(n){return Se(n,t,e)}},Be=function(){return Object(r.useContext)(De)},Ue=function(e){var t=e.children,n=we().currentUser,o=Object(r.useState)([]),c=v()(o,2),s=c[0],i=c[1],u=Object(r.useState)([]),l=v()(u,2),f=l[0],p=l[1],d=Object(r.useState)(null),m=v()(d,2),b=m[0],h=m[1],g=Object(r.useState)([]),y=v()(g,2),E=y[0],w=y[1],O=Object(r.useState)([]),j=v()(O,2),x=j[0],P=j[1],S=X();return Object(r.useEffect)((function(){var e;return function(e,t,n,r,a,o,c){return $.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",ie(e,t,n,r,a,o));case 1:case"end":return c.stop()}}))}(n,b,i,p,h,w).then((function(t){P(!1),e=t})),function(){e&&e.length&&(console.log("unsubscribing from "+e.length+" subscriptions"),e.forEach((function(e){return e()})))}}),[b,n]),a.a.createElement(De.Provider,{value:Ce({isDataLoading:x,dice:s},Ie(s,je,n,S),{sessions:f},Ie(f,xe,n,S),{getSession:Te,currentSession:b,setCurrentSession:Ae(h),sessionDice:E,joinSession:Ne(n,f)})},t)},We=Object(r.createContext)({}),Le=function(){return Object(r.useContext)(We)},Re=function(e){var t=e.children,n=Object(r.useState)(!0),o=v()(n,2),c=o[0],s=o[1];return a.a.createElement(We.Provider,{value:{isAppLoading:c,setAppLoading:s}},t)},Ve=n(307),ze=n(116),Me=n(274),He=n(317),Je=n(43),Fe=function(e){var t=e.children;return a.a.createElement(h.a,{style:Ke.row},t)},Ge=function(e){var t=e.data,n=t.user,r=t.dice,o=r.reduce((function(e,t){return e+t.value}),0);return a.a.createElement(h.a,{style:Ke.window},a.a.createElement(x.a,{style:Ke.userName},n.name),a.a.createElement(Je.a,{style:Ke.scrollContainer,contentContainerStyle:Ke.scrollViewContainer},r.map((function(e){var t=e.key,n=e.type,r=e.value;return a.a.createElement(k,{key:t,type:n,value:r})}))),a.a.createElement(h.a,{style:Ke.total},a.a.createElement(j.a,null,"Total: ",o)))},Ye=function(){var e=Be(),t=e.sessionDice;if(!e.currentSession)return a.a.createElement(U,{centered:!0},a.a.createElement(x.a,null,"Please select a session first."));if(!t.length)return a.a.createElement(U,{centered:!0},a.a.createElement(j.a,null,"To see the Board, first invite some friends to your session."),a.a.createElement(L,null),a.a.createElement(x.a,null,"Go to Sessions screen, touch on a session's option icon, copy it's URL and share to your friends."));var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e<=3?[1,e]:[2,Math.ceil(e/t)]}(t.length),o=v()(r,2),c=o[0],s=o[1];return n=1===c?[t]:t.reduce((function(e,t,n){return n%s===0?[].concat(ee()(e),[[t]]):(e[e.length-1].push(t),e)}),[]),a.a.createElement(U,null,n.map((function(e,t){return a.a.createElement(Fe,{key:""+t},e.map((function(e){return a.a.createElement(Ge,{key:e.user.key,data:e})})))})))};Ye.navigationOptions={header:null},Ye.title="Board",Ye.iconName="desktop";var Ke=g.a.create({row:{flex:1,flexDirection:"row",height:"100%"},window:{flex:1,height:"100%",alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:"#dddddd"},scrollContainer:{width:"100%",marginTop:30},scrollViewContainer:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},total:{width:"100%",backgroundColor:"#ffffff",paddingVertical:10,flexDirection:"row",justifyContent:"center",alignItems:"center",borderTopColor:"#dddddd",borderTopWidth:1},userName:{position:"absolute",top:5,left:5}}),Qe=Ye;function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(n,!0).forEach((function(t){ne()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=function(){var e=Be(),t=e.dice,n=e.addDie,o=e.removeDie,c=e.clearDie;if(!e.currentSession)return a.a.createElement(h.a,{style:_e.emptyMessage},a.a.createElement(x.a,null,"Please select a session first."));var s=t.reduce((function(e,t){return e+t.value}),0);return a.a.createElement(U,null,0===t.length&&a.a.createElement(h.a,{style:_e.emptyMessage},a.a.createElement(x.a,null,"Tap buttons below to roll some dice")),t.length>0&&a.a.createElement(r.Fragment,null,a.a.createElement(Je.a,{style:_e.scrollContainer,contentContainerStyle:_e.rolledDice},t.map((function(e){return a.a.createElement(k,{key:e.key,type:e.type,value:e.value,onPress:function(){return o(e)}})}))),a.a.createElement(h.a,{style:_e.total},a.a.createElement(j.a,null,"Total: ",s))),a.a.createElement(h.a,{style:_e.dice},a.a.createElement(D,{faces:4,onPress:n}),a.a.createElement(D,{faces:6,onPress:n}),a.a.createElement(D,{faces:8,onPress:n}),a.a.createElement(D,{faces:10,onPress:n}),a.a.createElement(D,{faces:12,onPress:n}),a.a.createElement(D,{faces:20,onPress:n}),a.a.createElement(N,{style:C.button,compact:!0,onPress:c},a.a.createElement(R.a,{name:"ios-refresh"}))))};Ze.navigationOptions={header:null},Ze.title="Roll",Ze.iconName="cube";var $e=qe({},c.a.select({ios:{shadowColor:"black",shadowOffset:{width:0,height:-3},shadowOpacity:.1,shadowRadius:3},android:{elevation:20},web:{boxShadow:"0 -3px 3px rgba(0, 0, 0, 0.1)"}})),_e=g.a.create({emptyMessage:{flex:1,justifyContent:"center",alignItems:"center"},scrollContainer:qe({width:"100%"},c.a.select({ios:{marginTop:30}})),rolledDice:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",flexWrap:"wrap"},total:{backgroundColor:"#ffffff",paddingVertical:20,flexDirection:"row",justifyContent:"center",alignItems:"center",borderTopColor:"#dddddd",borderTopWidth:1},dice:qe({},$e,{backgroundColor:"#fbfbfb",paddingVertical:20,flexDirection:"row",justifyContent:"center",alignItems:"center"})}),et=Ze,tt=n(113),nt=n(311),rt=n(105),at=n(273),ot=n(275),ct=n(268),st=n(60),it=n(277),ut=function(e){var t=e.isOpen,n=e.setOpen,o=e.addSession,c=Object(r.useState)(""),s=v()(c,2),i=s[0],u=s[1],l=function(e,t){return function(){e(!1),t("")}}(n,u);return a.a.createElement(rt.a,null,a.a.createElement(at.a,{visible:t,onDismiss:l},a.a.createElement(at.a.Title,null,"New Session"),a.a.createElement(at.a.Content,null,a.a.createElement(ot.a,{label:"Name",value:i,onChangeText:function(e){return u(e)}})),a.a.createElement(at.a.Actions,null,a.a.createElement(p.a,{onPress:l},"Cancel"),a.a.createElement(p.a,{onPress:function(){o({name:i}),l()}},"OK"))))},lt=function(e){var t=e.removeSession,n=e.session,o=e.currentUser,c=A()(e,["removeSession","session","currentUser"]),s=Object(r.useState)(!1),i=v()(s,2),u=i[0],l=i[1],p=function(){return l(!1)};return a.a.createElement(ct.a,{visible:u,onDismiss:p,anchor:a.a.createElement(T.a,f()({},c,{icon:"more-vert",onPress:function(){return l(!0)}}))},a.a.createElement(ct.a.Item,{onPress:function(){nt.a.setString("https://willcrisis.github.io/diceroller/#/join/"+n.key),p()},title:"Copy link",icon:"content-copy"}),n.owner===o.uid&&a.a.createElement(ct.a.Item,{onPress:function(){return setTimeout((function(){return t(n)}),200)},title:"Delete",icon:"delete"}))},ft=function(e,t){return{backgroundColor:e&&e.key===t.key?"#52d98f":"#ffffff"}},pt=function(e){var t=e.navigation,n=Be(),o=n.sessions,c=n.addSession,s=n.removeSession,i=n.setCurrentSession,u=n.currentSession,l=we().currentUser,p=Object(r.useState)(!1),d=v()(p,2),m=d[0],b=d[1];return a.a.createElement(r.Fragment,null,o.length>0&&a.a.createElement(tt.a,{data:o,renderItem:function(e){var n=e.item;return a.a.createElement(st.a.Item,{style:[dt.listItem,ft(u,n)],title:n.name,onPress:function(){return function(e,t,n){return $.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$.a.awrap(t(e));case 2:n.navigate("roll");case 3:case"end":return r.stop()}}))}(n,i,t)},right:function(e){return a.a.createElement(lt,f()({},e,{session:n,removeSession:s,currentUser:l}))}})}}),0===o.length&&a.a.createElement(U,{centered:!0},a.a.createElement(x.a,null,"You don't have any session yet.")),a.a.createElement(ut,{isOpen:m,setOpen:b,addSession:function(e){return c(e)}}),a.a.createElement(it.a,{style:dt.fab,icon:"add",onPress:function(){return b(!0)}}))};pt.title="Sessions",pt.iconName="albums";var dt=g.a.create({fab:{position:"absolute",margin:16,right:0,bottom:0},listItem:{borderBottomColor:"#dddddd",borderBottomWidth:1}}),mt=pt,bt=n(316),vt=function(){var e=we().logOut;return a.a.createElement(U,null,a.a.createElement(h.a,null,a.a.createElement(N,{onPress:e},"Logout")),a.a.createElement(bt.a,null))};vt.title="Settings",vt.iconName="options",vt.navigationOptions={title:"app.json"};var ht=vt;function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(n,!0).forEach((function(t){ne()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c.a.select({web:{board:Qe}}),{roll:et,sessions:mt,settings:ht});function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(n,!0).forEach((function(t){ne()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot=c.a.select({web:{headerMode:"screen"},default:{}}),jt=Object.keys(yt).map((function(e){return{id:e,Component:yt[e]}})).reduce((function e(t,n){var r,o=n.id,s=n.Component;if("object"!==typeof s||s.screen){var i=s.screen||s,u=function(e){return a.a.createElement(i,e)};u.navigationOptions=function(e){return wt({header:a.a.createElement(Me.b.Header,null,a.a.createElement(Me.b.Content,{title:i.title}))},"function"===typeof i.navigationOptions?i.navigationOptions(e):i.navigationOptions)},r=ne()({},o,u)}else r=Object.keys(s.screens).map((function(e){return{id:e,Component:s.screens[e]}})).reduce(e,{});var l=Object(ze.createStackNavigator)(r,f()({},Ot,s.config));return l.navigationOptions={tabBarLabel:s.title,tabBarIcon:function(e){var t=e.focused;return a.a.createElement(z,{focused:t,name:"ios"===c.a.OS?"ios-"+s.iconName:"md-"+s.iconName})}},l.path=s.path||"",wt({},t,ne()({},o,l))}),{}),xt=Object(He.a)(jt,{initialRouteName:"sessions"}),Pt=n(157),St=function(e){return e.navigate("sessions")},kt=function(e){var t=e.navigation,n=Be(),o=n.getSession,c=n.joinSession,s=n.sessions,i=Object(r.useState)(null),u=v()(i,2),l=u[0],f=u[1],p=Object(r.useState)(!0),d=v()(p,2),b=d[0],h=d[1],g=t.getParam("session");Object(r.useEffect)((function(){!function(){var e;$.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.a.awrap(o(g));case 2:e=t.sent,f(e),h(!1);case 5:case"end":return t.stop()}}))}()}),[]);var y=s.find((function(e){var t=e.key;return l&&l.key===t}));return a.a.createElement(U,{centered:!0},b&&a.a.createElement(Pt.a,null),!b&&a.a.createElement(r.Fragment,null,y?a.a.createElement(x.a,null,"You already joined this session"):a.a.createElement(x.a,null,"Would you like to join this session?"),a.a.createElement(L,null),a.a.createElement(j.a,null,l.name),a.a.createElement(L,null),y?a.a.createElement(m,{onPress:function(){return St(t)}},"Go to Sessions Page"):a.a.createElement(m,{onPress:function(){return function(e,t,n){t(e),St(n)}(g,c,t)}},"Join Session")))};kt.navigationOptions={header:null};var Ct=kt,Dt=n(528),It=n(236),At=n(115);function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(n,!0).forEach((function(t){ne()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(){return $.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.awrap(Promise.all([It.a.loadAsync([n(507),n(508)]),At.b(Nt({},R.a.font))]));case 2:case"end":return e.stop()}}))}function Ut(e){console.warn(e)}var Wt=function(e){e.navigation;var t=Le().setAppLoading;return a.a.createElement(Dt.a,{startAsync:Bt,onError:Ut,onFinish:function(){return function(e){e(!1)}(t)}})},Lt=n(104),Rt=function(e){var t=e.navigation,n=Object(r.useState)(""),o=v()(n,2),c=o[0],s=o[1],i=Object(r.useState)(""),u=v()(i,2),l=u[0],f=u[1],p=we().loginWithEmailAndPassword;return a.a.createElement(U,{centered:!0},a.a.createElement(j.a,null,"Dice Roller"),a.a.createElement(L,null),a.a.createElement(Lt.a,null,"Login"),a.a.createElement(L,null),a.a.createElement(ot.a,{mode:"outlined",label:"E-mail",value:c,error:!c,onChangeText:function(e){return s(e)}}),a.a.createElement(L,null),a.a.createElement(ot.a,{mode:"outlined",label:"Password",value:l,error:!l,onChangeText:function(e){return f(e)},secureTextEntry:!0}),a.a.createElement(L,null),a.a.createElement(N,{onPress:function(){return p(c,l)}},"Login"),a.a.createElement(L,null),a.a.createElement(N,{onPress:function(){return t.navigate("Register")}},"Register"))},Vt=function(e){var t=e.navigation,n=Object(r.useState)(""),o=v()(n,2),c=o[0],s=o[1],i=Object(r.useState)(""),u=v()(i,2),l=u[0],f=u[1],p=Object(r.useState)(""),d=v()(p,2),m=d[0],b=d[1],h=Object(r.useState)(""),g=v()(h,2),y=g[0],E=g[1],w=we().registerWithEmailAndPassword,O=X();return a.a.createElement(U,{centered:!0},a.a.createElement(j.a,null,"Dice Roller"),a.a.createElement(L,null),a.a.createElement(Lt.a,null,"Register"),a.a.createElement(L,null),a.a.createElement(ot.a,{mode:"outlined",label:"Name",value:c,error:!c,onChangeText:function(e){return s(e)}}),a.a.createElement(L,null),a.a.createElement(ot.a,{mode:"outlined",label:"E-mail",value:l,error:!l,onChangeText:function(e){return f(e)}}),a.a.createElement(L,null),a.a.createElement(ot.a,{mode:"outlined",label:"Password",value:m,error:!m,onChangeText:function(e){return b(e)},secureTextEntry:!0}),a.a.createElement(L,null),a.a.createElement(ot.a,{mode:"outlined",label:"Confirm Password",value:y,error:!y,onChangeText:function(e){return E(e)},secureTextEntry:!0}),a.a.createElement(L,null),a.a.createElement(N,{onPress:function(){return function(e,t,n){return t===n||e({text:"Passwords must match"})&&!1}(O,m,y)&&w(c,l,m)}},"Register"),a.a.createElement(L,null),a.a.createElement(N,{onPress:function(){return t.goBack()}},"Go back"))},zt=Object(ze.createSwitchNavigator)({Main:{screen:xt,path:""},Join:{screen:Ct,path:"join/:session"}});zt.path="";var Mt=Object(ze.createStackNavigator)({Auth:{screen:Rt,navigationOptions:{header:null},path:""},Register:{screen:Vt,navigationOptions:{header:null},path:"register"}});Mt.path="";var Ht=Object(ze.createSwitchNavigator)({Auth:Mt,App:zt},{initialRouteName:"App"});Ht.path="";var Jt=function(e){var t=we(),n=t.isAuthLoading,o=t.currentUser,c=Be().isDataLoading,s=Le().isAppLoading,i=n||c||s;return Object(r.useEffect)((function(){i||e.navigation.navigate(o?"App":"Auth")}),[s,n,c,o]),i?a.a.createElement(Wt,e):a.a.createElement(Ht,e)};Jt.router=Ht.router;var Ft=Jt;Ft.path="";var Gt=Object(Ve.createBrowserApp)(Ft,{history:"hash"});F(),Object(u.d)();var Yt=o.a.makeUrl("/");t.a=function(){return a.a.createElement(q,null,a.a.createElement(Oe,null,a.a.createElement(Ue,null,a.a.createElement(Re,null,a.a.createElement(i.a,null,a.a.createElement(U,null,"ios"===c.a.OS&&a.a.createElement(s.a,{barStyle:"default"}),a.a.createElement(Gt,{uriPrefix:Yt})))))))}},337:function(e,t,n){e.exports=n(513)},507:function(e,t,n){e.exports=n.p+"static/media/robot-dev.54da1e98.png"},508:function(e,t,n){e.exports=n.p+"static/media/robot-prod.c7578911.png"}},[[337,1,2]]]);
//# sourceMappingURL=../../48131d5e5637420cbdc7.map